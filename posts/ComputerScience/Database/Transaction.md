---
created: 2021-07-08
modified: 2021-07-08
tags: [DB, DataBase]
title: Transaction
author: Yo0oN
categories: [DataBase]
---

## 1. Transaction?

***데이터의 상태를 변환시키는 하나의 논리적인 작업 단위***

데이터의 정합성을 보장하기 위한 기능으로, 작업이 100% 적용되거나 아무것도 적용되지 않아야함을 보장해 주는 기능이다.    

예를들면 A가 B에게 돈을 이체한다고 생각해보자.    
1. A의 계좌에서 돈이 있음을 확인한다.
2. A의 계좌에서 돈을 출금한다.
3. B의 계좌에 돈을 입금한다.
위의 여러 작업들이 모여서 하나의 작업 단위를 이룬다.    

그리고 트랜잭션이 성공적으로 끝나게되면 Commit되고, 비정상적으로 종료되면 트랜잭션이 실행되기 이전으로 돌아가야하기 때문에 Rollback되어야 한다.

### 1-1. 트랜잭션의 성질

데이터베이스에서 트랜잭션의 무결성을 보장하기위해 필요한 4가지 요소로 ACID라고도 한다.

1. 원자성 Atomicity    
트랜잭션의 모든 연산이 데이터베이스에 모두 반영되거나, 어떠한 연산도 전혀 반영되지 않아야 한다.

2. 일관성 Consistency    
트랜잭션의 작업 처리 결과가 항상 일관성이 있어야 한다.

3. 독립성 Isolation    
둘 이상의 트랜잭션이 동시에 실행되고 있으면, 두 트랜잭션은 서로에게 영향을 줄 수 없다.

4. 지속성 Durability    
트랜잭션이 성공적으로 종료되면 그 결과는 영구적으로 유지되어야 한다.



## 2. Transaction의 상태

![image](https://user-images.githubusercontent.com/53729311/124930320-306c5e00-e03c-11eb-9f16-0d6959338a37.png)

|상태|설명|
|:------:|------|
|Active|트랜잭션이 정상적으로 실행 중인 상태|
|Partially Committed|트랜잭션의 마지막 연산까지 완료되었고, Commit 되기 전의 상태|
|Failed|트랜잭션 실행 중 오류가 발생되어 중단된 상태|
|Committed|트랜잭션이 성공적으로 종료되어 Commit 된 상태|
|Aborted|트랜잭션이 비정상적으로 종료되어 트랜잭션 실행 전 상태로 Rollback 된 상태|
