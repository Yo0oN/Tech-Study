|작성일|수정일|
|:----|:----|
|2021-02-14|2021-06-27|

--------

## 1. IP?

***Internet Protocol*** 인터넷 전송 규약

두 장치가 통신을 할 때 사용되는 프로토콜로, IP Address를 이용하여 통신하는 방법을 말한다.    

### 1-1. IP Address

IP Address 는 논리적 주소라고도 하며, 네트워크에서 노드(장치)를 구분하는데 사용하는 고유 번호(주소)이다.     
네트워크에 연결되어있고, 네트워킹을 하려면 반드시 가지고 있어야 하는 주소이다. (집주소라고 생각하면 될듯하다..)    

그리고 네트워크에 연결되어있지 않은 장치라도 172나 192로 시작하는 비공인 IP(가상주소)를 가지고 있는데 이 주소로는 통신이 불가능하고, 네트워크에 연결하여 IP 주소를 받아야 한다.    

> 이런 주소들은 ICANN(국제 인터넷 주소 관리 기구)와, APNIC(아시아-태평양 지역 네트워크 정보센터), KRNIC(한국 인터넷 정보 센터)에서 관리한다.    
  
 
###  1-2. 도메인, DNS

두 장치가 통신을 하려면 IP 주소를 알아야한다고 했는데, IP주소는 숫자이므로 외우기 어렵다.    
하지만, 우리는 서버에 요청을 할 때 숫자를 입력하지 않고, `www.google.com`과 같이 영어로 된 문자를 입력한다.    

이렇게 naver, daum, google처럼 이름으로 쉽게 만들어진것이 도메인이다.

그리고 영어로 된 문자를 다시 숫자로 이루어진 IP로 바꿔주는 곳을 DNS(Domain Name System) 서버라고 한다.


### 1-3. IP Address의 구조

IP 주소는 네트워크 주소와 호스트 주소로 이루어져 있다.    

네트워크 주소는 여러 네트워크 중 특정 네트워크를 구분할 때 사용한다.    
호스트 주소는 하나의 네트워크 안에서 특정 장치를 구분할 때 사용한다.


### 1-4. IP의 구조

어떤 장치가 다른 장치에 데이터를 전송하기 위해서는 그 데이터와, 전송에 사용되는 프로토콜에서 필요한 정보를 담은 헤더를 합쳐 패킷을 만들어 전송한다.    
IP 또한 마찬가지로 데이터에 Header를 더한다.    

IP Header에서 가장 중요한 것은 출발자의 IP 주소와, 도착지의 IP 주소이다.    
이후 라우터는 여기에 적힌 도착지의 IP 주소를 이용하여 도착지의 네트워크에 있는 원하는 장치로 전송해준다.


## 2. MAC 주소?

MAC 주소는 장치의 하드웨어 자체에 부여된 고유 식별번호로, 변하지 않는 주소이다. 그래서 물리적 주소라고도 불린다.    

변하지 않는 주소이기 때문에 이 주소 또한 네트워크에서 노드(장치)를 구분하는데 사용된다.


## 3. ARP (Address Resolution Protocol)

1번의 IP 주소와 2번의 MAC 주소에서 둘 다 네트워크에서 노드를 구분하는데 사용하는 주소라고 했는데, 1-4. IP의 구조에서 IP Header에 MAC 주소가 적혀있다는 말은 없다.    
그러면 어떻게 MAC 주소를 알아내는걸까?

1. 구글에 접속하기 위해 우리는 브라우저 주소창에 `www.google.com`을 입력한다.    
2. DNS 서버에서는 이 주소를 보고 IP 주소를 알려준다.    
3. IP 주소를 네트워크 주소와 호스트 주소로 분리한다.
4. 라우터는 네트워크 주소를 이용해 원하는 네트워크로 데이터를 전송해준다.
5. 도착지의 라우터는 자신과 연결된 모든 장치들에게 호스트 주소를 던진다. (= 브로드캐스트 - 모든 장치에 질문)
6. 해당 호스트 주소를 가진 장치가 자신의 MAC 주소를 알려준다.
7. MAC 주소는 고유한 번호이기 때문에 라우터는 자신이 어떤 장치로 연결되어야 하는지 확실하게 알게되고, 두 장치가 통신을 한다.

순서는 대략 위와 같고, 이렇게 IP 주소를 이용하여 MAC 주소를 알아내는 것을 APR이라고 한다. (생략된 부분이 있을 수 있습니다.)

